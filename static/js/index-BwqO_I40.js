var ge=Object.defineProperty,ve=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var O=(r,n,t)=>n in r?ge(r,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[n]=t,E=(r,n)=>{for(var t in n||(n={}))xe.call(n,t)&&O(r,t,n[t]);if(M)for(var t of M(n))ye.call(n,t)&&O(r,t,n[t]);return r},L=(r,n)=>ve(r,be(n));var H=(r,n,t)=>new Promise((v,h)=>{var b=d=>{try{i(t.next(d))}catch(m){h(m)}},x=d=>{try{i(t.throw(d))}catch(m){h(m)}},i=d=>d.done?v(d.value):Promise.resolve(d.value).then(b,x);i((t=t.apply(r,n)).next())});import{useRole as ke}from"./hook-DlrrhGjQ.js";import{R as Ce,P as we}from"./refresh-Cie5JWcC.js";import{u as f}from"./hooks-CBN6oGny.js";import{d as Ve,p as Re,a as g,m as Se,aM as $e,y as Ie,aN as De,gj as Pe,e as c,A as Ue,f as Q,k as W,i as l,w as s,u as e,h as _,g as p,v as w,$ as X,B as q,t as G,aF as V,j as Be,_ as ze}from"./index-DPW8Wnaw.js";import{d as Ae}from"./delete-Ce0TSdK5.js";import{d as Ne}from"./edit-pen-Ci7W0xNM.js";import{d as Te,a as je}from"./close-CObHKOmY.js";import{A as Fe}from"./add-circle-line-Cw_F_RXn.js";import{d as Me}from"./check-CIQVCvCT.js";import"./form.vue_vue_type_script_setup_true_lang-CZtrPesS.js";import"./hooks-BK9k36qu.js";import"./system-0BDryBCY.js";import"./sortable.esm-CkCitmyH.js";import"./epTheme-CKLCAVmH.js";import"./collapse-CeAQJohj.js";const Oe={class:"main"},Ee={key:0,class:"!min-w-[calc(100vw-60vw-268px)] w-full mt-2 px-2 pb-2 bg-bg_color ml-2 overflow-auto"},Le={class:"flex justify-between w-full px-3 pt-5 pb-4"},He={class:"flex"},Qe={class:"font-bold truncate"},We={class:"flex flex-wrap"},Xe=Ve({name:"SystemRole",__name:"index",setup(r){const n=Re(()=>["w-[22px]","h-[22px]","flex","justify-center","items-center","outline-none","rounded-[4px]","cursor-pointer","transition-colors","hover:bg-[#0000000f]","dark:hover:bg-[#ffffff1f]","dark:hover:text-[#ffffffd9]"]),t=g(),v=g(),h=g(),b=g(),x=g(),{form:i,isShow:d,curRow:m,loading:P,columns:J,rowStyle:K,dataList:Y,treeData:Z,treeProps:ee,isLinkage:y,pagination:le,isExpandAll:R,isSelectAll:S,treeSearchValue:$,onSearch:U,resetForm:oe,openDialog:B,handleMenu:z,handleSave:te,handleDelete:ae,filterMethod:ne,transformI18n:se,onQueryChanged:re,handleSizeChange:ie,handleCurrentChange:ce,handleSelectionChange:de}=ke(t);return Se(()=>{$e(b,()=>H(this,null,function*(){yield Ie(),De(60).then(()=>{x.value=parseFloat(Pe(h.value.getTableDoms().tableWrapper.style.height,"px"))})}))}),(qe,a)=>{var j;const I=c("el-input"),k=c("el-form-item"),A=c("el-option"),pe=c("el-select"),u=c("el-button"),me=c("el-form"),ue=c("el-popconfirm"),fe=c("pure-table"),N=c("IconifyIconOffline"),D=c("el-checkbox"),_e=c("el-tree-v2"),T=Ue("tippy");return Q(),W("div",Oe,[l(me,{ref_key:"formRef",ref:v,inline:!0,model:e(i),class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px] overflow-auto"},{default:s(()=>[l(k,{label:"角色名称：",prop:"name"},{default:s(()=>[l(I,{modelValue:e(i).name,"onUpdate:modelValue":a[0]||(a[0]=o=>e(i).name=o),placeholder:"请输入角色名称",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),l(k,{label:"角色标识：",prop:"code"},{default:s(()=>[l(I,{modelValue:e(i).code,"onUpdate:modelValue":a[1]||(a[1]=o=>e(i).code=o),placeholder:"请输入角色标识",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])]),_:1}),l(k,{label:"状态：",prop:"status"},{default:s(()=>[l(pe,{modelValue:e(i).status,"onUpdate:modelValue":a[2]||(a[2]=o=>e(i).status=o),placeholder:"请选择状态",clearable:"",class:"!w-[180px]"},{default:s(()=>[l(A,{label:"已启用",value:"1"}),l(A,{label:"已停用",value:"0"})]),_:1},8,["modelValue"])]),_:1}),l(k,null,{default:s(()=>[l(u,{type:"primary",icon:e(f)("ri:search-line"),loading:e(P),onClick:e(U)},{default:s(()=>[_(" 搜索 ")]),_:1},8,["icon","loading","onClick"]),l(u,{icon:e(f)(e(Ce)),onClick:a[3]||(a[3]=o=>e(oe)(v.value))},{default:s(()=>[_(" 重置 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),p("div",{ref_key:"contentRef",ref:b,class:w(["flex",e(X)()?"flex-wrap":""])},[l(e(we),{class:w([e(d)&&!e(X)()?"!w-[60vw]":"w-full"]),style:{transition:"width 220ms cubic-bezier(0.4, 0, 0.2, 1)"},title:"角色管理（仅演示，操作后不生效）",columns:e(J),onRefresh:e(U)},{buttons:s(()=>[l(u,{type:"primary",icon:e(f)(e(Fe)),onClick:a[4]||(a[4]=o=>e(B)())},{default:s(()=>[_(" 新增角色 ")]),_:1},8,["icon"])]),default:s(({size:o,dynamicColumns:he})=>[l(fe,{ref_key:"tableRef",ref:h,"align-whole":"center",showOverflowTooltip:"","table-layout":"auto",loading:e(P),size:o,adaptive:"","row-style":e(K),adaptiveConfig:{offsetBottom:108},data:e(Y),columns:he,pagination:L(E({},e(le)),{size:o}),"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onSelectionChange:e(de),onPageSizeChange:e(ie),onPageCurrentChange:e(ce)},{operation:s(({row:C})=>[l(u,{class:"reset-margin",link:"",type:"primary",size:o,icon:e(f)(e(Ne)),onClick:F=>e(B)("修改",C)},{default:s(()=>[_(" 修改 ")]),_:2},1032,["size","icon","onClick"]),l(ue,{title:`是否确认删除角色名称为${C.name}的这条数据`,onConfirm:F=>e(ae)(C)},{reference:s(()=>[l(u,{class:"reset-margin",link:"",type:"primary",size:o,icon:e(f)(e(Ae))},{default:s(()=>[_(" 删除 ")]),_:2},1032,["size","icon"])]),_:2},1032,["title","onConfirm"]),l(u,{class:"reset-margin",link:"",type:"primary",size:o,icon:e(f)(e(Te)),onClick:F=>e(z)(C)},{default:s(()=>[_(" 权限 ")]),_:2},1032,["size","icon","onClick"])]),_:2},1032,["loading","size","row-style","data","columns","pagination","onSelectionChange","onPageSizeChange","onPageCurrentChange"])]),_:1},8,["class","columns","onRefresh"]),e(d)?(Q(),W("div",Ee,[p("div",Le,[p("div",He,[p("span",{class:w(n.value)},[q(l(N,{class:"dark:text-white",width:"18px",height:"18px",icon:e(je),onClick:e(z)},null,8,["icon","onClick"]),[[T,{content:"关闭"}]])],2),p("span",{class:w([n.value,"ml-2"])},[q(l(N,{class:"dark:text-white",width:"18px",height:"18px",icon:e(Me),onClick:e(te)},null,8,["icon","onClick"]),[[T,{content:"保存菜单权限"}]])],2)]),p("p",Qe," 菜单权限 "+G(`${(j=e(m))!=null&&j.name?`（${e(m).name}）`:""}`),1)]),l(I,{modelValue:e($),"onUpdate:modelValue":a[5]||(a[5]=o=>V($)?$.value=o:null),placeholder:"请输入菜单进行搜索",class:"mb-1",clearable:"",onInput:e(re)},null,8,["modelValue","onInput"]),p("div",We,[l(D,{modelValue:e(R),"onUpdate:modelValue":a[6]||(a[6]=o=>V(R)?R.value=o:null),label:"展开/折叠"},null,8,["modelValue"]),l(D,{modelValue:e(S),"onUpdate:modelValue":a[7]||(a[7]=o=>V(S)?S.value=o:null),label:"全选/全不选"},null,8,["modelValue"]),l(D,{modelValue:e(y),"onUpdate:modelValue":a[8]||(a[8]=o=>V(y)?y.value=o:null),label:"父子联动"},null,8,["modelValue"])]),l(_e,{ref_key:"treeRef",ref:t,"show-checkbox":"",data:e(Z),props:e(ee),height:x.value,"check-strictly":!e(y),"filter-method":e(ne)},{default:s(({node:o})=>[p("span",null,G(e(se)(o.label)),1)]),_:1},8,["data","props","height","check-strictly","filter-method"])])):Be("",!0)],2)])}}}),pl=ze(Xe,[["__scopeId","data-v-1e71a5d8"]]);export{pl as default};
